<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Echocardiographic Prediction of Survival after Heart Attack</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>





<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="code.html">code</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Echocardiographic Prediction of Survival after Heart Attack</h1>

</div>


<div id="introduction" class="section level1">
<h1>1.Introduction</h1>
<p>Heart disease is the lead cause of death for men and women in the United States, causing about 1 in 4 deaths. Heart disease is a relatively general term and it can refer to several types of heart conditions. The most common type of heart disease in America is coronary artery disease (CAD), which can lead to a heart attack. Other heart disease symptoms including heart failure and Arrhythmia. Every year, about 647,000 Americans die from heart disease, and about 160,000 of them occur in people under age 65. It’s hard to predict the survival rate of patients after a heart attack because it depends on many aspects. As a result, it’s important to estimate the association between survival time after heart attack and different medical indexes in echocardiograms. This survival analysis can help researchers better forecast patients’ survival rate after heart attack based on medical indexes and design corresponding therapy plans.</p>
</div>
<div id="methods" class="section level1">
<h1>2.Methods</h1>
<p><em>About the data</em></p>
<p>The real-world dataset we use is donated by researchers in Johns Hopkins University and I receive it from University of California, Irvine, it contains 132 instances of patients for 12 variables describing the patient’s heart attack and condition. We take into account general information such as age, medical indexes in echocardiograms such as Pericardial effusion, E-point septal separation, left ventricular end-diastolic dimension. The first step of data analysis was cleaning, renaming variables, identifying missing values, outliers and unreasonable values in the dataset.</p>
<p>First, we use descriptive statistics to give an overall picture of variables’ character, distribution of explanatory variables are also shown. Secondly, the correlation matrix and VIF (Variance Inflation Factor) was then computed to testify whether a strong association between different predictors exist. It is also used to briefly observe the correlation between survival of patient and specific variables. Thirdly, the distribution of independent variables when disease presence and absence are shown.</p>
<p><em>Model Building</em></p>
<p>Because the dataset we have is a survival dataset, I first visualized survival probability of patients changing over time through graphing Kaplan-Meier estimate of survival probability.</p>
<p>And to estimate the association between medical indexes and survival rate of patients after heart attack. I fit the cox proportional hazard model where outcome is hazard function of sample and explanatory variables are medical indexes and age. Hazard function at time t is the chance of death for the patient at time t given that the patient has not failed up to that point in time.</p>
<p>In the Cox model, we assume that there is a baseline hazard function h0(t), which depends only on time. And we assume that the ratio of two hazard functions taking different covariates value to be constant and independent of time, in other word, covariates’ effect on hazard function of patients is independent of time. I choose to use a semi-parametric model because I am less interested in modeling the hazard rate’s dependence on time and more interested in its dependence on medical indexes or age. Cox model estimates regression parameters as covariate effects but ignores the dependence on time, which is appropriate.</p>
<p>The assumption of Cox model is as below:</p>
<p><span class="math display">\[
h1(t |z)=h0(t )*(z), (z)=exp(\beta&#39;z)
\]</span></p>
<p>The model assumes that each covariate has a multiplicative effect in the hazards function that is constant over time. To test the assumption of cox proportional hazard model, I plot the cumulative martingale residuals and standardized score process of observations against the values of the explanatory variable along with 20 simulated residual patterns to explore the functional form of covariates. The p-value for the Kolmogorov-type supremum test based on 1000 simulation is also included.</p>
</div>
<div id="results" class="section level1">
<h1>3.Results</h1>
<p>Table 3, Table 2 shows the result of descriptive analysis, Table 1 shows the number of missing values in independent variables. And as we can see, 2% of survival time and survival status are missing, which is also a small amount. More missing values aggregate in variable epss and lvdd. I remove 2 observations that have missing survival time and survival status.</p>
<p>Patients who are dead at the end of the survival period tend to have a longer survival time, this is reasonable because as the investigation time increases, patients’ survival rate decreases. Patients who are dead at the end of the survival period tend to be younger on average. Pericardial effusion is fluid around the heart, and fluid may put pressure on the heart, which is harmful. 13.6% patients who are dead at the end of the survival period have pericardial effusion, and 27.9% patients who are alive at the end of the survival period have pericardial effusion. This does not mean that pericardial effusion is beneficial, for the two groups are not comparable and dead patients have a longer investigation time. This is the same for other medical indexes. Fractional shortening is the reduction of the length of the end-diastolic diameter that occurs by the end of systole, and a lower value is increasingly abnormal. Patients who are dead at the end of the survival period tend to have a bigger fractional shortening on average. E-point septal separation (epss) is the distance in space separating the anterior MV leaflet from the septal wall, larger numbers are increasingly abnormal. Patients who are dead at the end of the survival period tend to have a smaller epss on average. Left ventricular end-diastolic dimension (lvdd) is a measure of the size of the heart at end-diastole. Large hearts tend to be sick hearts. The heart size and wall motion index for patients in two groups does not differ significantly.</p>
<center>
<img src="table1&amp;2.png" style="width:50.0%;height:50.0%" />
<center>
<center>
<img src="table3.png" />
<center>
<p>I also check the outlier and unreasonable values in independent variables and outcome, which are shown in Figure 1 and Figure 2. Variable pericardial effusion is binary but one observation has pericardial effusion=77, therefore I remove this value. As for other variables, there exists outliers but the value they take is still possible, therefore I do not conduct any further processing.</p>
<center>
<img src="figure1.png" />
<center>
<center>
<img src="figure2.png" style="width:85.0%;height:85.0%" />
<center>
<p>Third, I plot the correlation matrix table (Table 3) and calculate the VIF (Table 4), which are shown below. Pearson correlation coefficient between 0 and 0.3 indicate a weak association, pearson correlation coefficient between 0.3 and 0.7 indicate a moderate association. The correlation coefficient between epss and lvdd is 0.62, correlation coefficient between epss and wall motion index is 0.41, and other correlation coefficients are smaller than 0.4. High VIF indicates that the associated independent variable is highly collinear with the other variables in the model. And I tend to get concerned when a VIF is greater than 2.50, epss have the maximum VIF equal to 1.9. Based on our analysis, variable epss have more collinearity with other variables, but it is still acceptable and we do not need to do any further preprocessing.</p>
<center>
<img src="table3.1.png" />
<center>
<center>
<img src="table4.png" />
<center>
<p>After finishing all the data cleaning and univariate analysis, I start to fit the cox proportional hazard model, the result (Table 5, Table 6) is as below.</p>
<center>
<img src="table5&amp;6.png" />
<center>
<p>The global test including likelihood ratio test, wald test, score test all have p-value close to 0.9, 0.9&gt;0.05, so under the significant level of 0.05, we can conclude that beta=0 and the model we fit is not significantly better than the null model. The p-value of all covariates including age, pericardial effusion, fractional shortening, epss, lvdd, wall motion index are all greater than 0.05. This indicates that under the significant level of 0.05, we conclude that the influence of age, pericardial effusion, fractional shortening, epss, lvdd, wall motion index on survival time of patients is not significant. The results above do not detect any variables that can predict the survival of patients. There are two potential reasons. First is that the sample size is too small, there are only 130 patients in the dataset after data cleaning. Second is that many demographic information and important medical indexes are not included. For example, the sex, race, blood suger level, blood pressure, serum cholestoral, chest pain. The variables we get are limited.</p>
<p>I also check the proportional hazard assumption. The results (Table 7) are as below. The supremum tests calculate the proportion of simulated score processes that yielded a maximum score larger than the maximum observed score process. Here all the variables have p-value greater than 0.05. Therefore, I conclude that proportional hazards assumption holds for all of our covariates. Besides that, in Figure 3, I also check if cumulative martingale residuals fluctuate around zero. And distribution of cumulative martingale residuals does not have any structure on independent variables, which indicates the correct specification of cox model.</p>
<center>
<img src="table7.png" />
<center>
<center>
<img src="figure3.png" />
<center>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
